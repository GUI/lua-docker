# AUTOMATICALLY GENERATED
# DO NOT EDIT THIS FILE DIRECTLY. Edit /Dockerfile.erb and run /update instead.

FROM debian:stretch

RUN set -ex \
      && saved_apt_mark="$(apt-mark showmanual)" \
    && apt-get update \
    && apt-get install -y --no-install-recommends \
      ca-certificates \
      curl \
      gcc \
      libc6-dev \
      make \
                && curl -fsSL -o /tmp/lua.tar.gz "https://luajit.org/download/LuaJIT-2.1.0-beta3.tar.gz" \
  && cd /tmp \
  && echo "eae40bc29d06ee5e3078f9444fcea39b *lua.tar.gz" | md5sum -c - \
  && mkdir /tmp/lua \
  && tar -xf /tmp/lua.tar.gz -C /tmp/lua --strip-components=1 \
  && cd /tmp/lua \
      && make CFLAGS="-DLUAJIT_ENABLE_LUA52COMPAT" \
    && make install \
      && ln -s /usr/local/bin/luajit-2.1.0-beta3 /usr/local/bin/luajit \
      && cd / \
      && apt-mark auto '.*' > /dev/null \
    && apt-mark manual $saved_apt_mark \
            && apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false \
    && rm -rf /var/lib/apt/lists/* \
    && rm -rf /tmp/lua /tmp/lua.tar.gz \
    && luajit -v

CMD ["luajit"]
